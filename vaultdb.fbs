
enum FieldType : byte {VARCHAR, INT, TIMESTAMP, UNSUPPORTED}

enum GroupByType : byte {MINX, COUNT, UNSUPPPORTED}


union ExprUnion {
    EqExpr
}


union FieldVal {
    TimeStampField,
    IntField,
    VarCharField
}

table ProjectList {
    cols:[int];
}

table GroupByDef {
    colno:int;
    optype:GroupByType;
}

table EqExpr {
    colno:int;
    val:FieldVal;
}

table TimeStampField {
    val:float;
}

table VarCharField {
    val:string;
}

table IntField {
    val:int;
}

table FieldDesc {
    type:FieldType;
    name:string;
    col:int = -1 (key);
}

table Schema {
    fielddescs:[FieldDesc];
}

table Field {
    fieldnum:int =-1 (key);
    val:FieldVal;
    genval:FieldVal;
}

table Tuple {
    schema:Schema;
    fields:[Field];
    isdummy:bool = false;
}

table Expr {
    expr:ExprUnion;
}

table Table {
    schema:Schema;
    tuples:[Tuple];
}
